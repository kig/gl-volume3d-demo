!function n(e,t,r){function o(i,u){if(!t[i]){if(!e[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[i]={exports:{}};e[i][0].call(f.exports,function(n){var t=e[i][1][n];return o(t||n)},f,f.exports,n,e,t,r)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(n,e,t){"use strict";function r(n,e){return!(!e||!/[^\s\0]/.test(e))&&(console.error(n+"\n"+e),e)}function o(n,e,t){var o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,e),n.compileShader(o);var a=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(a,t),n.compileShader(a);var i=n.createProgram();n.attachShader(i,o),n.deleteShader(o),n.attachShader(i,a),n.deleteShader(a),n.linkProgram(i);var u=!1;if(u|=r("program",n.getProgramInfoLog(i)),u|=r("vertex",n.getShaderInfoLog(o)),u|=r("fragment",n.getShaderInfoLog(a)))throw new Error("Invalid shader");return i}function a(n,e,t,r,o){return u(n,e,t,"range",function(n){return parseFloat(n.value)},{min:r,max:o,step:.001,value:e[t]})}function i(n,e,t){return u(n,e,t,"checkbox",function(n){return n.checked},{checked:e[t]})}function u(n,e,t,r,o,a){var i=document.createElement("div"),u=document.createElement("label");u.for=n,u.textContent=n;var c=document.createElement("input");c.id=n,c.type=r;for(var s in a)c[s]=a[s];return c.oninput=c.onchange=function(n){e[t]=o(this)},i.appendChild(u),i.appendChild(c),i}var c=document.body.appendChild(document.createElement("canvas")),s=c.getContext("webgl2"),f=n("right-now"),l=n("gl-mat4"),v=n("gl-vec3"),p=n("isosurface"),m={isocaps:!0,volume:!1,isosurface:!0,isoLevel:.7,isoRange:.6},d={min:[0,0,.4],max:[1,1,.6]},h=o(s,"#version 300 es\n\n#define POSITION_LOCATION 0\n\nprecision highp float;\nprecision highp int;\n\nlayout(location = POSITION_LOCATION) in vec3 aPosition;\n\nout vec3 vPosition;\n\nvoid main() {\n  gl_Position = vec4(aPosition, 1.0);\n  vPosition = gl_Position.xyz;\n}","#version 300 es\n\nprecision highp float;\nprecision highp sampler3D;\n\nin vec3 vPosition;\n\nuniform sampler3D uTexture;\nuniform float uTime;\nuniform vec2 uResolution;\n\nuniform mat4 uModelView;\nuniform mat4 uProjection;\n\nuniform vec3 uClipBoxMin;\nuniform vec3 uClipBoxMax;\n\nuniform bool uIsocaps;\n\nuniform float uIsoLevel;\nuniform float uIsoRange;\n\nout vec4 color;\n\nstruct Box {\n  vec3 minPoint;\n  vec3 maxPoint;\n};\n\nbool boxIntersect(vec3 ro, vec3 rd, Box box, out float t1, out float t2, out vec3 nml)\n{\n  vec3 ird = 1.0 / rd;\n  vec3 v1 = (box.minPoint - ro) * ird;\n  vec3 v2 = (box.maxPoint - ro) * ird;\n  vec3 n = min(v1, v2);\n  vec3 f = max(v1, v2);\n  float enter = max(n.x, max(n.y, n.z));\n  float exit = min(f.x, min(f.y, f.z));\n  if (exit > 0.0 && enter < exit) {\n    t1 = enter;\n    t2 = exit;\n    return true;\n  }\n  return false;\n}\n\nbool planeIntersect(vec3 ro, vec3 rd, vec3 p, vec3 nml, out float t)\n{\n  float d = dot(nml, rd);\n  if (d <= 0.0) {\n    return false;\n  }\n  d = -dot(ro-p, nml) / d;\n  if (d < 0.0) {\n    return false;\n  }\n  t = d;\n  return true;\n}\n\nvec3 gradient(vec3 uvw, vec4 c)\n{\n  vec3 e = vec3(0.0, 0.0, 1.0 / 256.0);\n  vec4 dx = texture(uTexture, uvw + e.zxx, -16.0) - c;\n  vec4 dy = texture(uTexture, uvw + e.xzx, -16.0) - c;\n  vec4 dz = texture(uTexture, uvw + e.xxz, -16.0) - c;\n  return vec3(dx.r, dy.r, dz.r);\n}\n\nvec3 grey(vec3 rgb) {\n  return vec3((rgb.r + rgb.g + rgb.b) / 3.0);\n}\n\nvec4 getColor(vec3 uvw, vec4 c) {\n  vec3 grad = gradient(uvw, c);\n  float alpha = 4.0*mix(0.05*c.r, 0.01*c.r, pow(clamp(c.r+0., 0.0, 1.0), 4.0));\n  //if (abs(c.r - uIsoLevel) <= uIsoRange) {\n  //  alpha = 0.2;\n  //}\n  vec3 col = 1.0-max(vec3(0.0), vec3(c.r*2., abs(0.7-c.r), 0.8-c.r)+0.5);\n  return vec4(pow(grey(abs(grad))+abs(grad), vec3(0.5))+col, alpha);  \n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / uResolution * 2.0 - 1.0;\n\n  mat4 clipToEye = inverse(uProjection);\n  mat4 eyeToWorld = inverse(uModelView);\n\n  vec4 clipNear = vec4(uv, -1.0, 1.0);\n  vec4 clipFar = vec4(uv, 1.0, 1.0);\n\n  vec4 eyeNear = clipToEye * clipNear;\n  vec4 eyeFar = clipToEye * clipFar;\n\n  vec4 worldNear = eyeToWorld * eyeNear;\n  vec4 worldFar = eyeToWorld * eyeFar;\n\n  vec3 ro = worldNear.xyz / worldNear.w;\n  vec3 rd = normalize((worldFar.xyz / worldFar.w) - ro);\n\n  vec4 accum = vec4(0.0);\n  color = vec4(0.0);\n  float t1, t2;\n  vec3 nml;\n  Box clipBox = Box(uClipBoxMin, uClipBoxMax);\n  if (boxIntersect(ro, rd, clipBox, t1, t2, nml)) {\n    vec3 uvw = (ro + rd * t1);\n    if ( uIsocaps && all(lessThanEqual(uvw, vec3(1.0))) && all(greaterThanEqual(uvw, vec3(0.0))) ) {\n      vec4 c = texture(uTexture, uvw, -16.0);\n      if (abs(c.r - uIsoLevel) <= uIsoRange) {\n        vec4 col = getColor(uvw, c);\n        color = 1.0 - col;\n        color.a = sqrt(c.r);\n      }\n    }\n    vec3 p1 = ro + rd * t1;\n    vec4 accum = vec4(0.0);\n    bool noHit = true;\n    float steps = (t2-t1) * 64.0;\n    float maxSteps = sqrt(3.0) * 64.0;\n    for (float i=0.0; i<maxSteps; i++) {\n      vec3 uvw = (p1 + rd * (t2-t1) * (1.0-i/steps));\n      //uvw += vec3(sin(uTime + uvw.y*6.0) * 0.2, 0.0, 0.0);\n      vec3 ou = uvw;\n      if (all(lessThanEqual(uvw, clipBox.maxPoint)) && all(greaterThanEqual(uvw, clipBox.minPoint)) ) {\n        vec4 c = texture(uTexture, uvw, -16.0);\n        if (abs(c.r - uIsoLevel) <= uIsoRange) {\n          vec4 col = getColor(uvw, c);\n          accum = mix(accum, col, col.a);\n          noHit = false;\n        }\n      }\n    }\n    if (noHit) {\n      discard;\n      return;\n    }\n    color = mix(1.0 - accum, color, color.a);\n    color.a = 1.0;\n  } else {\n    discard;\n  }\n}\n"),x=o(s,"#version 300 es\n\n#define POSITION_LOCATION 0\n#define NORMAL_LOCATION 1\n\nprecision highp float;\nprecision highp int;\n\nlayout(location = POSITION_LOCATION) in vec3 aPosition;\nlayout(location = NORMAL_LOCATION) in vec3 aNormal;\n\nuniform mat4 uModelView;\nuniform mat4 uProjection;\nuniform float uTime;\nuniform vec3 uClipBoxMin;\nuniform vec3 uClipBoxMax;\nuniform vec3 uDimensions;\n\nout vec3 vPosition;\nout vec3 vNormal;\n\nout float vClipped;\n\nstruct Box {\n  vec3 minPoint;\n  vec3 maxPoint;\n};\n\nvoid main() {\n  Box clipBox = Box(uClipBoxMin, uClipBoxMax);\n\n  vec3 p = aPosition / uDimensions;\n  vec3 cp = clamp(p, clipBox.minPoint, clipBox.maxPoint);\n  vec3 d = (p - cp) * uDimensions;\n  vec3 ad = abs(d);\n  float maxD = max(max(ad.x, ad.y), ad.z);\n  vClipped = maxD;\n  gl_Position = uProjection * uModelView * vec4(cp, 1.0);\n  vPosition = cp;\n  vNormal = normalize(transpose(mat3(inverse(uModelView))) * aNormal);\n}","#version 300 es\n\nprecision highp float;\nprecision highp sampler3D;\n\nin vec3 vPosition;\nin vec3 vNormal;\nin float vClipped;\n\nuniform sampler3D uTexture;\nuniform float uTime;\nuniform vec2 uResolution;\n\nuniform mat4 uModelView;\nuniform mat4 uProjection;\n\nuniform bool uIsocaps;\n\nuniform float uIsoLevel;\nuniform float uIsoRange;\n\nuniform vec3 uLightPosition;\nuniform vec4 uLightColor;\n\nout vec4 color;\n\nvoid main() {\n  color = vec4(abs(dot(normalize(vNormal), -normalize(transpose(mat3(inverse(uModelView))) * uLightPosition))) * uLightColor * uLightColor.a);\n  if (vClipped > 0.0) {\n    color = texture(uTexture, vPosition.xyz).rrra;\n    if (!uIsocaps || (vClipped > 1.0 && abs(color.r - uIsoLevel) > uIsoRange)) {\n      discard;\n    }\n  }\n  color.a = 1.0;\n}"),g=5,M=45,w=0,T=0,b=!1,A=[0,0],y=[0,0],E=[0,0];window.onmousedown=function(n){"CANVAS"===n.target.tagName&&(n.preventDefault(),b=!0,A=[n.clientX,n.clientY])},window.onmousemove=function(n){if(b){for(y=[n.clientX,n.clientY],E=y.map(function(n,e){return n-A[e]}),A=y,w-=.01*E[0];w<0;)w+=2*Math.PI;w%=2*Math.PI,T-=.01*E[1],T=Math.max(-Math.PI/2,Math.min(Math.PI/2,T)),n.preventDefault()}},window.onmouseup=function(n){b&&(n.preventDefault(),b=!1)},window.addEventListener("wheel",function(n){n.preventDefault();var e=n.wheelDeltaY||n.deltaY||n.wheelDelta||n.detail;void 0===e&&(e=0),g*=Math.pow(1.01,-e),g=Math.max(.5,Math.min(10,g))},!1);var R=document.createElement("div");R.className="controls",R.style.position="absolute",R.style.zIndex=1,R.style.left="10px",R.style.top="10px",R.appendChild(a("Min X",d.min,0,0,1)),R.appendChild(a("Min Y",d.min,1,0,1)),R.appendChild(a("Min Z",d.min,2,0,1)),R.appendChild(a("Max X",d.max,0,0,1)),R.appendChild(a("Max Y",d.max,1,0,1)),R.appendChild(a("Max Z",d.max,2,0,1)),R.appendChild(a("Iso level",m,"isoLevel",0,1)),R.appendChild(a("Iso range",m,"isoRange",0,1)),R.appendChild(i("Isocaps",m,"isocaps")),R.appendChild(i("Isosurface",m,"isosurface")),R.appendChild(i("Volume",m,"volume")),document.body.appendChild(R);for(var P=function(n,e,t){t||(t=e,e="text");var r=new XMLHttpRequest;r.responseType=e,r.onload=function(){t(r.response)},r.open("GET",n,!0),r.send()},I=[],C=1;C<=109;C++)I.push("data/MRbrain."+C);!function(n,e,t){t||(t=e,e="text");var r=n.length,o=[],a=function(n){return function(e){o[n]=e,0==--r&&t(o)}};n.forEach(function(n,t){P(n,e,a(t))})}(I,"arraybuffer",function(e){function t(n,e,t,r,o,a){for(var i=p.marchingCubes(r,o,a),u=i.positions,c=new Float32Array(9*i.cells.length),s=new Float32Array(9*i.cells.length),f=v.create(),l=v.create(),m=v.create(),d=0;d<i.cells.length;d++){var h,x,g,M=i.cells[d],w=9*d;h=u[M[0]],x=u[M[1]],g=u[M[2]],v.subtract(l,x,h),v.subtract(m,g,h),v.cross(f,l,m),c[w++]=h[0],c[w++]=h[1],c[w++]=h[2],c[w++]=x[0],c[w++]=x[1],c[w++]=x[2],c[w++]=g[0],c[w++]=g[1],c[w++]=g[2],w-=9,s[w++]=f[0],s[w++]=f[1],s[w++]=f[2],s[w++]=f[0],s[w++]=f[1],s[w++]=f[2],s[w++]=f[0],s[w++]=f[1],s[w++]=f[2]}return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,c,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,s,n.STATIC_DRAW),c.length/3}function r(n,e,t){return e.uniformLocations||(e.uniformLocations={}),e.uniformLocations[t]||(e.uniformLocations[t]=n.getUniformLocation(e,t)),e.uniformLocations[t]}function o(){function n(n,t){n.useProgram(t),n.uniform1i(r(n,t,"uTexture"),F),n.uniform1i(r(n,t,"uIsocaps"),m.isocaps?1:0),n.uniform1f(r(n,t,"uTime"),f()/1e3),n.uniform1f(r(n,t,"uIsoLevel"),m.isoLevel),n.uniform1f(r(n,t,"uIsoRange"),m.isoRange),n.uniform2f(r(n,t,"uResolution"),e,o),n.uniform3fv(r(n,t,"uDimensions"),i),n.uniform3fv(r(n,t,"uClipBoxMin"),d.min),n.uniform3fv(r(n,t,"uClipBoxMax"),d.max),n.uniform3fv(r(n,t,"uLightPosition"),[1,1,1]),n.uniform4fv(r(n,t,"uLightColor"),[1,1,1,1]),n.uniformMatrix4fv(r(n,t,"uProjection"),!1,P),n.uniformMatrix4fv(r(n,t,"uModelView"),!1,R)}!m.isosurface||m.isoLevel===O&&m.isoRange===S||(U=t(s,D,N,i,I,C),O=m.isoLevel,S=m.isoRange);var e=s.drawingBufferWidth,o=s.drawingBufferHeight;s.clearColor(1,1,1,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,e,o),s.enable(s.DEPTH_TEST),s.depthMask(!0),l.perspective(P,M,e/o,.1,100);var a=[Math.cos(w)*Math.cos(T)*g,Math.sin(T)*g,Math.sin(w)*Math.cos(T)*g];l.lookAt(R,a,[0,0,0],[0,-1,0]),l.translate(R,R,[-.5,-.5,-.3]),l.scale(R,R,[1,1,.6]),m.volume&&(n(s,h),s.bindBuffer(s.ARRAY_BUFFER,B),s.enableVertexAttribArray(0),s.vertexAttribPointer(0,3,s.FLOAT,!1,0,0),s.disableVertexAttribArray(1),s.drawArrays(s.TRIANGLES,0,6)),m.isosurface&&(n(s,x),s.bindBuffer(s.ARRAY_BUFFER,D),s.enableVertexAttribArray(0),s.vertexAttribPointer(0,3,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,N),s.enableVertexAttribArray(1),s.vertexAttribPointer(1,3,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,U))}function a(){o(),requestAnimationFrame(a)}for(var i=[256,256,109],u=i[0],b=i[1],A=i[2],y=new Uint16Array(e.length*e[0].byteLength/2),E=0;E<e.length;E++)y.set(new Uint16Array(e[E]),E*e[0].byteLength/2);for(E=0;E<y.length;E++)y[E]=y[E]<<8&65280|y[E]>>8;for(var R=l.create(),P=l.create(),I=function(n,e,t){if(n<0||n>u-.5||e<0||e>b-.5||t<0||t>A-.5)return 0;n=Math.round(n),e=Math.round(e),t=Math.round(t);var r=n+e*u+t*u*b,o=Math.max(0,Math.min(1,(y[r]-1300)/2e3));return Math.abs(o-m.isoLevel)<=m.isoRange},C=[[0,0,0].map(function(n){return n-1}),[u,b,A].map(function(n){return n+1})],L=new Uint8Array(u*b*A*4),E=0;E<y.length;E++){var _=255*Math.max(0,Math.min(1,(y[E]-1300)/2e3));L[4*E]=_,L[4*E+1]=_,L[4*E+2]=_,L[4*E+3]=255}var F=s.createTexture();s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_3D,F),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_R,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_BASE_LEVEL,0),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MAX_LEVEL,Math.log2(u)),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage3D(s.TEXTURE_3D,0,s.RGBA,u,b,A,0,s.RGBA,s.UNSIGNED_BYTE,L),s.generateMipmap(s.TEXTURE_3D);var B=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,B),s.bufferData(s.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,-1,1,0,1,-1,0,1,1,0]),s.STATIC_DRAW);var D=s.createBuffer(),N=s.createBuffer(),U=t(s,D,N,i,I,C),O=m.isoLevel,S=m.isoRange;window.addEventListener("resize",n("canvas-fit")(c),!1),requestAnimationFrame(a)})},{"canvas-fit":2,"gl-mat4":13,"gl-vec3":39,isosurface:61,"right-now":65}],2:[function(n,e,t){var r=n("element-size");e.exports=function(n,e,t){function a(){var e=a.parent||n.parentNode;if("function"==typeof e)var t=e(o)||o,u=t[0],c=t[1];else if(e&&e!==document.body)var s=r(e),u=0|s[0],c=0|s[1];else var u=window.innerWidth,c=window.innerHeight;return i?(n.setAttribute("width",u*a.scale+"px"),n.setAttribute("height",c*a.scale+"px")):(n.width=u*a.scale,n.height=c*a.scale),n.style.width=u+"px",n.style.height=c+"px",a}var i="SVG"===n.nodeName.toUpperCase();return n.style.position=n.style.position||"absolute",n.style.top=0,n.style.left=0,a.scale=parseFloat(t||1),a.parent=e,a()};var o=new Float32Array(2)},{"element-size":3}],3:[function(n,e,t){function r(n){return parseFloat(n)||0}e.exports=function(n){if(n===window||n===document.body)return[window.innerWidth,window.innerHeight];if(!n.parentNode){var e=!0;document.body.appendChild(n)}var t=n.getBoundingClientRect(),o=getComputedStyle(n),a=(0|t.height)+r(o.getPropertyValue("margin-top"))+r(o.getPropertyValue("margin-bottom")),i=(0|t.width)+r(o.getPropertyValue("margin-left"))+r(o.getPropertyValue("margin-right"));return e&&document.body.removeChild(n),[i,a]}},{}],4:[function(n,e,t){e.exports=function(n,e){var t=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],v=e[10],p=e[11],m=e[12],d=e[13],h=e[14],x=e[15];return n[0]=u*(v*x-p*h)-l*(c*x-s*h)+d*(c*p-s*v),n[1]=-(r*(v*x-p*h)-l*(o*x-a*h)+d*(o*p-a*v)),n[2]=r*(c*x-s*h)-u*(o*x-a*h)+d*(o*s-a*c),n[3]=-(r*(c*p-s*v)-u*(o*p-a*v)+l*(o*s-a*c)),n[4]=-(i*(v*x-p*h)-f*(c*x-s*h)+m*(c*p-s*v)),n[5]=t*(v*x-p*h)-f*(o*x-a*h)+m*(o*p-a*v),n[6]=-(t*(c*x-s*h)-i*(o*x-a*h)+m*(o*s-a*c)),n[7]=t*(c*p-s*v)-i*(o*p-a*v)+f*(o*s-a*c),n[8]=i*(l*x-p*d)-f*(u*x-s*d)+m*(u*p-s*l),n[9]=-(t*(l*x-p*d)-f*(r*x-a*d)+m*(r*p-a*l)),n[10]=t*(u*x-s*d)-i*(r*x-a*d)+m*(r*s-a*u),n[11]=-(t*(u*p-s*l)-i*(r*p-a*l)+f*(r*s-a*u)),n[12]=-(i*(l*h-v*d)-f*(u*h-c*d)+m*(u*v-c*l)),n[13]=t*(l*h-v*d)-f*(r*h-o*d)+m*(r*v-o*l),n[14]=-(t*(u*h-c*d)-i*(r*h-o*d)+m*(r*c-o*u)),n[15]=t*(u*v-c*l)-i*(r*v-o*l)+f*(r*c-o*u),n}},{}],5:[function(n,e,t){e.exports=function(n){var e=new Float32Array(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}},{}],6:[function(n,e,t){e.exports=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}},{}],7:[function(n,e,t){e.exports=function(){var n=new Float32Array(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],8:[function(n,e,t){e.exports=function(n){var e=n[0],t=n[1],r=n[2],o=n[3],a=n[4],i=n[5],u=n[6],c=n[7],s=n[8],f=n[9],l=n[10],v=n[11],p=n[12],m=n[13],d=n[14],h=n[15];return(e*i-t*a)*(l*h-v*d)-(e*u-r*a)*(f*h-v*m)+(e*c-o*a)*(f*d-l*m)+(t*u-r*i)*(s*h-v*p)-(t*c-o*i)*(s*d-l*p)+(r*c-o*u)*(s*m-f*p)}},{}],9:[function(n,e,t){e.exports=function(n,e){var t=e[0],r=e[1],o=e[2],a=e[3],i=t+t,u=r+r,c=o+o,s=t*i,f=r*i,l=r*u,v=o*i,p=o*u,m=o*c,d=a*i,h=a*u,x=a*c;return n[0]=1-l-m,n[1]=f+x,n[2]=v-h,n[3]=0,n[4]=f-x,n[5]=1-s-m,n[6]=p+d,n[7]=0,n[8]=v+h,n[9]=p-d,n[10]=1-s-l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],10:[function(n,e,t){e.exports=function(n,e,t){var r=e[0],o=e[1],a=e[2],i=e[3],u=r+r,c=o+o,s=a+a,f=r*u,l=r*c,v=r*s,p=o*c,m=o*s,d=a*s,h=i*u,x=i*c,g=i*s;return n[0]=1-(p+d),n[1]=l+g,n[2]=v-x,n[3]=0,n[4]=l-g,n[5]=1-(f+d),n[6]=m+h,n[7]=0,n[8]=v+x,n[9]=m-h,n[10]=1-(f+p),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}},{}],11:[function(n,e,t){e.exports=function(n,e,t,r,o,a,i){var u=1/(t-e),c=1/(o-r),s=1/(a-i);return n[0]=2*a*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*a*c,n[6]=0,n[7]=0,n[8]=(t+e)*u,n[9]=(o+r)*c,n[10]=(i+a)*s,n[11]=-1,n[12]=0,n[13]=0,n[14]=i*a*2*s,n[15]=0,n}},{}],12:[function(n,e,t){e.exports=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],13:[function(n,e,t){e.exports={create:n("./create"),clone:n("./clone"),copy:n("./copy"),identity:n("./identity"),transpose:n("./transpose"),invert:n("./invert"),adjoint:n("./adjoint"),determinant:n("./determinant"),multiply:n("./multiply"),translate:n("./translate"),scale:n("./scale"),rotate:n("./rotate"),rotateX:n("./rotateX"),rotateY:n("./rotateY"),rotateZ:n("./rotateZ"),fromRotationTranslation:n("./fromRotationTranslation"),fromQuat:n("./fromQuat"),frustum:n("./frustum"),perspective:n("./perspective"),perspectiveFromFieldOfView:n("./perspectiveFromFieldOfView"),ortho:n("./ortho"),lookAt:n("./lookAt"),str:n("./str")}},{"./adjoint":4,"./clone":5,"./copy":6,"./create":7,"./determinant":8,"./fromQuat":9,"./fromRotationTranslation":10,"./frustum":11,"./identity":12,"./invert":14,"./lookAt":15,"./multiply":16,"./ortho":17,"./perspective":18,"./perspectiveFromFieldOfView":19,"./rotate":20,"./rotateX":21,"./rotateY":22,"./rotateZ":23,"./scale":24,"./str":25,"./translate":26,"./transpose":27}],14:[function(n,e,t){e.exports=function(n,e){var t=e[0],r=e[1],o=e[2],a=e[3],i=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],v=e[10],p=e[11],m=e[12],d=e[13],h=e[14],x=e[15],g=t*u-r*i,M=t*c-o*i,w=t*s-a*i,T=r*c-o*u,b=r*s-a*u,A=o*s-a*c,y=f*d-l*m,E=f*h-v*m,R=f*x-p*m,P=l*h-v*d,I=l*x-p*d,C=v*x-p*h,L=g*C-M*I+w*P+T*R-b*E+A*y;return L?(L=1/L,n[0]=(u*C-c*I+s*P)*L,n[1]=(o*I-r*C-a*P)*L,n[2]=(d*A-h*b+x*T)*L,n[3]=(v*b-l*A-p*T)*L,n[4]=(c*R-i*C-s*E)*L,n[5]=(t*C-o*R+a*E)*L,n[6]=(h*w-m*A-x*M)*L,n[7]=(f*A-v*w+p*M)*L,n[8]=(i*I-u*R+s*y)*L,n[9]=(r*R-t*I-a*y)*L,n[10]=(m*b-d*w+x*g)*L,n[11]=(l*w-f*b-p*g)*L,n[12]=(u*E-i*P-c*y)*L,n[13]=(t*P-r*E+o*y)*L,n[14]=(d*M-m*T-h*g)*L,n[15]=(f*T-l*M+v*g)*L,n):null}},{}],15:[function(n,e,t){var r=n("./identity");e.exports=function(n,e,t,o){var a,i,u,c,s,f,l,v,p,m,d=e[0],h=e[1],x=e[2],g=o[0],M=o[1],w=o[2],T=t[0],b=t[1],A=t[2];return Math.abs(d-T)<1e-6&&Math.abs(h-b)<1e-6&&Math.abs(x-A)<1e-6?r(n):(l=d-T,v=h-b,p=x-A,m=1/Math.sqrt(l*l+v*v+p*p),l*=m,v*=m,p*=m,a=M*p-w*v,i=w*l-g*p,u=g*v-M*l,(m=Math.sqrt(a*a+i*i+u*u))?(a*=m=1/m,i*=m,u*=m):(a=0,i=0,u=0),c=v*u-p*i,s=p*a-l*u,f=l*i-v*a,(m=Math.sqrt(c*c+s*s+f*f))?(c*=m=1/m,s*=m,f*=m):(c=0,s=0,f=0),n[0]=a,n[1]=c,n[2]=l,n[3]=0,n[4]=i,n[5]=s,n[6]=v,n[7]=0,n[8]=u,n[9]=f,n[10]=p,n[11]=0,n[12]=-(a*d+i*h+u*x),n[13]=-(c*d+s*h+f*x),n[14]=-(l*d+v*h+p*x),n[15]=1,n)}},{"./identity":12}],16:[function(n,e,t){e.exports=function(n,e,t){var r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],v=e[9],p=e[10],m=e[11],d=e[12],h=e[13],x=e[14],g=e[15],M=t[0],w=t[1],T=t[2],b=t[3];return n[0]=M*r+w*u+T*l+b*d,n[1]=M*o+w*c+T*v+b*h,n[2]=M*a+w*s+T*p+b*x,n[3]=M*i+w*f+T*m+b*g,M=t[4],w=t[5],T=t[6],b=t[7],n[4]=M*r+w*u+T*l+b*d,n[5]=M*o+w*c+T*v+b*h,n[6]=M*a+w*s+T*p+b*x,n[7]=M*i+w*f+T*m+b*g,M=t[8],w=t[9],T=t[10],b=t[11],n[8]=M*r+w*u+T*l+b*d,n[9]=M*o+w*c+T*v+b*h,n[10]=M*a+w*s+T*p+b*x,n[11]=M*i+w*f+T*m+b*g,M=t[12],w=t[13],T=t[14],b=t[15],n[12]=M*r+w*u+T*l+b*d,n[13]=M*o+w*c+T*v+b*h,n[14]=M*a+w*s+T*p+b*x,n[15]=M*i+w*f+T*m+b*g,n}},{}],17:[function(n,e,t){e.exports=function(n,e,t,r,o,a,i){var u=1/(e-t),c=1/(r-o),s=1/(a-i);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*s,n[11]=0,n[12]=(e+t)*u,n[13]=(o+r)*c,n[14]=(i+a)*s,n[15]=1,n}},{}],18:[function(n,e,t){e.exports=function(n,e,t,r,o){var a=1/Math.tan(e/2),i=1/(r-o);return n[0]=a/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(o+r)*i,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*o*r*i,n[15]=0,n}},{}],19:[function(n,e,t){e.exports=function(n,e,t,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(o+a);return n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=-(i-u)*c*.5,n[9]=(o-a)*s*.5,n[10]=r/(t-r),n[11]=-1,n[12]=0,n[13]=0,n[14]=r*t/(t-r),n[15]=0,n}},{}],20:[function(n,e,t){e.exports=function(n,e,t,r){var o,a,i,u,c,s,f,l,v,p,m,d,h,x,g,M,w,T,b,A,y,E,R,P,I=r[0],C=r[1],L=r[2],_=Math.sqrt(I*I+C*C+L*L);return Math.abs(_)<1e-6?null:(_=1/_,I*=_,C*=_,L*=_,o=Math.sin(t),a=Math.cos(t),i=1-a,u=e[0],c=e[1],s=e[2],f=e[3],l=e[4],v=e[5],p=e[6],m=e[7],d=e[8],h=e[9],x=e[10],g=e[11],M=I*I*i+a,w=C*I*i+L*o,T=L*I*i-C*o,b=I*C*i-L*o,A=C*C*i+a,y=L*C*i+I*o,E=I*L*i+C*o,R=C*L*i-I*o,P=L*L*i+a,n[0]=u*M+l*w+d*T,n[1]=c*M+v*w+h*T,n[2]=s*M+p*w+x*T,n[3]=f*M+m*w+g*T,n[4]=u*b+l*A+d*y,n[5]=c*b+v*A+h*y,n[6]=s*b+p*A+x*y,n[7]=f*b+m*A+g*y,n[8]=u*E+l*R+d*P,n[9]=c*E+v*R+h*P,n[10]=s*E+p*R+x*P,n[11]=f*E+m*R+g*P,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}},{}],21:[function(n,e,t){e.exports=function(n,e,t){var r=Math.sin(t),o=Math.cos(t),a=e[4],i=e[5],u=e[6],c=e[7],s=e[8],f=e[9],l=e[10],v=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=a*o+s*r,n[5]=i*o+f*r,n[6]=u*o+l*r,n[7]=c*o+v*r,n[8]=s*o-a*r,n[9]=f*o-i*r,n[10]=l*o-u*r,n[11]=v*o-c*r,n}},{}],22:[function(n,e,t){e.exports=function(n,e,t){var r=Math.sin(t),o=Math.cos(t),a=e[0],i=e[1],u=e[2],c=e[3],s=e[8],f=e[9],l=e[10],v=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=a*o-s*r,n[1]=i*o-f*r,n[2]=u*o-l*r,n[3]=c*o-v*r,n[8]=a*r+s*o,n[9]=i*r+f*o,n[10]=u*r+l*o,n[11]=c*r+v*o,n}},{}],23:[function(n,e,t){e.exports=function(n,e,t){var r=Math.sin(t),o=Math.cos(t),a=e[0],i=e[1],u=e[2],c=e[3],s=e[4],f=e[5],l=e[6],v=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=a*o+s*r,n[1]=i*o+f*r,n[2]=u*o+l*r,n[3]=c*o+v*r,n[4]=s*o-a*r,n[5]=f*o-i*r,n[6]=l*o-u*r,n[7]=v*o-c*r,n}},{}],24:[function(n,e,t){e.exports=function(n,e,t){var r=t[0],o=t[1],a=t[2];return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*o,n[5]=e[5]*o,n[6]=e[6]*o,n[7]=e[7]*o,n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11]*a,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}},{}],25:[function(n,e,t){e.exports=function(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}},{}],26:[function(n,e,t){e.exports=function(n,e,t){var r,o,a,i,u,c,s,f,l,v,p,m,d=t[0],h=t[1],x=t[2];return e===n?(n[12]=e[0]*d+e[4]*h+e[8]*x+e[12],n[13]=e[1]*d+e[5]*h+e[9]*x+e[13],n[14]=e[2]*d+e[6]*h+e[10]*x+e[14],n[15]=e[3]*d+e[7]*h+e[11]*x+e[15]):(r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],v=e[9],p=e[10],m=e[11],n[0]=r,n[1]=o,n[2]=a,n[3]=i,n[4]=u,n[5]=c,n[6]=s,n[7]=f,n[8]=l,n[9]=v,n[10]=p,n[11]=m,n[12]=r*d+u*h+l*x+e[12],n[13]=o*d+c*h+v*x+e[13],n[14]=a*d+s*h+p*x+e[14],n[15]=i*d+f*h+m*x+e[15]),n}},{}],27:[function(n,e,t){e.exports=function(n,e){if(n===e){var t=e[1],r=e[2],o=e[3],a=e[6],i=e[7],u=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=r,n[9]=a,n[11]=e[14],n[12]=o,n[13]=i,n[14]=u}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n}},{}],28:[function(n,e,t){e.exports=function(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}},{}],29:[function(n,e,t){e.exports=function(n,e){var t=r(n[0],n[1],n[2]),i=r(e[0],e[1],e[2]);o(t,t),o(i,i);var u=a(t,i);return u>1?0:Math.acos(u)};var r=n("./fromValues"),o=n("./normalize"),a=n("./dot")},{"./dot":36,"./fromValues":38,"./normalize":47}],30:[function(n,e,t){e.exports=function(n){var e=new Float32Array(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}},{}],31:[function(n,e,t){e.exports=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}},{}],32:[function(n,e,t){e.exports=function(){var n=new Float32Array(3);return n[0]=0,n[1]=0,n[2]=0,n}},{}],33:[function(n,e,t){e.exports=function(n,e,t){var r=e[0],o=e[1],a=e[2],i=t[0],u=t[1],c=t[2];return n[0]=o*c-a*u,n[1]=a*i-r*c,n[2]=r*u-o*i,n}},{}],34:[function(n,e,t){e.exports=function(n,e){var t=e[0]-n[0],r=e[1]-n[1],o=e[2]-n[2];return Math.sqrt(t*t+r*r+o*o)}},{}],35:[function(n,e,t){e.exports=function(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}},{}],36:[function(n,e,t){e.exports=function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}},{}],37:[function(n,e,t){e.exports=function(n,e,t,o,a,i){var u,c;for(e||(e=3),t||(t=0),c=o?Math.min(o*e+t,n.length):n.length,u=t;u<c;u+=e)r[0]=n[u],r[1]=n[u+1],r[2]=n[u+2],a(r,r,i),n[u]=r[0],n[u+1]=r[1],n[u+2]=r[2];return n};var r=n("./create")()},{"./create":32}],38:[function(n,e,t){e.exports=function(n,e,t){var r=new Float32Array(3);return r[0]=n,r[1]=e,r[2]=t,r}},{}],39:[function(n,e,t){e.exports={create:n("./create"),clone:n("./clone"),angle:n("./angle"),fromValues:n("./fromValues"),copy:n("./copy"),set:n("./set"),add:n("./add"),subtract:n("./subtract"),multiply:n("./multiply"),divide:n("./divide"),min:n("./min"),max:n("./max"),scale:n("./scale"),scaleAndAdd:n("./scaleAndAdd"),distance:n("./distance"),squaredDistance:n("./squaredDistance"),length:n("./length"),squaredLength:n("./squaredLength"),negate:n("./negate"),inverse:n("./inverse"),normalize:n("./normalize"),dot:n("./dot"),cross:n("./cross"),lerp:n("./lerp"),random:n("./random"),transformMat4:n("./transformMat4"),transformMat3:n("./transformMat3"),transformQuat:n("./transformQuat"),rotateX:n("./rotateX"),rotateY:n("./rotateY"),rotateZ:n("./rotateZ"),forEach:n("./forEach")}},{"./add":28,"./angle":29,"./clone":30,"./copy":31,"./create":32,"./cross":33,"./distance":34,"./divide":35,"./dot":36,"./forEach":37,"./fromValues":38,"./inverse":40,"./length":41,"./lerp":42,"./max":43,"./min":44,"./multiply":45,"./negate":46,"./normalize":47,"./random":48,"./rotateX":49,"./rotateY":50,"./rotateZ":51,"./scale":52,"./scaleAndAdd":53,"./set":54,"./squaredDistance":55,"./squaredLength":56,"./subtract":57,"./transformMat3":58,"./transformMat4":59,"./transformQuat":60}],40:[function(n,e,t){e.exports=function(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}},{}],41:[function(n,e,t){e.exports=function(n){var e=n[0],t=n[1],r=n[2];return Math.sqrt(e*e+t*t+r*r)}},{}],42:[function(n,e,t){e.exports=function(n,e,t,r){var o=e[0],a=e[1],i=e[2];return n[0]=o+r*(t[0]-o),n[1]=a+r*(t[1]-a),n[2]=i+r*(t[2]-i),n}},{}],43:[function(n,e,t){e.exports=function(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n}},{}],44:[function(n,e,t){e.exports=function(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n}},{}],45:[function(n,e,t){e.exports=function(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}},{}],46:[function(n,e,t){e.exports=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}},{}],47:[function(n,e,t){e.exports=function(n,e){var t=e[0],r=e[1],o=e[2],a=t*t+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),n[0]=e[0]*a,n[1]=e[1]*a,n[2]=e[2]*a),n}},{}],48:[function(n,e,t){e.exports=function(n,e){e=e||1;var t=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*e;return n[0]=Math.cos(t)*o,n[1]=Math.sin(t)*o,n[2]=r*e,n}},{}],49:[function(n,e,t){e.exports=function(n,e,t,r){var o=[],a=[];return o[0]=e[0]-t[0],o[1]=e[1]-t[1],o[2]=e[2]-t[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),n[0]=a[0]+t[0],n[1]=a[1]+t[1],n[2]=a[2]+t[2],n}},{}],50:[function(n,e,t){e.exports=function(n,e,t,r){var o=[],a=[];return o[0]=e[0]-t[0],o[1]=e[1]-t[1],o[2]=e[2]-t[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),n[0]=a[0]+t[0],n[1]=a[1]+t[1],n[2]=a[2]+t[2],n}},{}],51:[function(n,e,t){e.exports=function(n,e,t,r){var o=[],a=[];return o[0]=e[0]-t[0],o[1]=e[1]-t[1],o[2]=e[2]-t[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],n[0]=a[0]+t[0],n[1]=a[1]+t[1],n[2]=a[2]+t[2],n}},{}],52:[function(n,e,t){e.exports=function(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}},{}],53:[function(n,e,t){e.exports=function(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n[2]=e[2]+t[2]*r,n}},{}],54:[function(n,e,t){e.exports=function(n,e,t,r){return n[0]=e,n[1]=t,n[2]=r,n}},{}],55:[function(n,e,t){e.exports=function(n,e){var t=e[0]-n[0],r=e[1]-n[1],o=e[2]-n[2];return t*t+r*r+o*o}},{}],56:[function(n,e,t){e.exports=function(n){var e=n[0],t=n[1],r=n[2];return e*e+t*t+r*r}},{}],57:[function(n,e,t){e.exports=function(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}},{}],58:[function(n,e,t){e.exports=function(n,e,t){var r=e[0],o=e[1],a=e[2];return n[0]=r*t[0]+o*t[3]+a*t[6],n[1]=r*t[1]+o*t[4]+a*t[7],n[2]=r*t[2]+o*t[5]+a*t[8],n}},{}],59:[function(n,e,t){e.exports=function(n,e,t){var r=e[0],o=e[1],a=e[2],i=t[3]*r+t[7]*o+t[11]*a+t[15];return i=i||1,n[0]=(t[0]*r+t[4]*o+t[8]*a+t[12])/i,n[1]=(t[1]*r+t[5]*o+t[9]*a+t[13])/i,n[2]=(t[2]*r+t[6]*o+t[10]*a+t[14])/i,n}},{}],60:[function(n,e,t){e.exports=function(n,e,t){var r=e[0],o=e[1],a=e[2],i=t[0],u=t[1],c=t[2],s=t[3],f=s*r+u*a-c*o,l=s*o+c*r-i*a,v=s*a+i*o-u*r,p=-i*r-u*o-c*a;return n[0]=f*s+p*-i+l*-c-v*-u,n[1]=l*s+p*-u+v*-i-f*-c,n[2]=v*s+p*-c+f*-u-l*-i,n}},{}],61:[function(n,e,t){t.surfaceNets=n("./lib/surfacenets.js").surfaceNets,t.marchingCubes=n("./lib/marchingcubes.js").marchingCubes,t.marchingTetrahedra=n("./lib/marchingtetrahedra.js").marchingTetrahedra},{"./lib/marchingcubes.js":62,"./lib/marchingtetrahedra.js":63,"./lib/surfacenets.js":64}],62:[function(n,e,t){var r=new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),o=[[],[0,8,3],[0,1,9],[1,8,3,9,8,1],[1,2,10],[0,8,3,1,2,10],[9,2,10,0,2,9],[2,8,3,2,10,8,10,9,8],[3,11,2],[0,11,2,8,11,0],[1,9,0,2,3,11],[1,11,2,1,9,11,9,8,11],[3,10,1,11,10,3],[0,10,1,0,8,10,8,11,10],[3,9,0,3,11,9,11,10,9],[9,8,10,10,8,11],[4,7,8],[4,3,0,7,3,4],[0,1,9,8,4,7],[4,1,9,4,7,1,7,3,1],[1,2,10,8,4,7],[3,4,7,3,0,4,1,2,10],[9,2,10,9,0,2,8,4,7],[2,10,9,2,9,7,2,7,3,7,9,4],[8,4,7,3,11,2],[11,4,7,11,2,4,2,0,4],[9,0,1,8,4,7,2,3,11],[4,7,11,9,4,11,9,11,2,9,2,1],[3,10,1,3,11,10,7,8,4],[1,11,10,1,4,11,1,0,4,7,11,4],[4,7,8,9,0,11,9,11,10,11,0,3],[4,7,11,4,11,9,9,11,10],[9,5,4],[9,5,4,0,8,3],[0,5,4,1,5,0],[8,5,4,8,3,5,3,1,5],[1,2,10,9,5,4],[3,0,8,1,2,10,4,9,5],[5,2,10,5,4,2,4,0,2],[2,10,5,3,2,5,3,5,4,3,4,8],[9,5,4,2,3,11],[0,11,2,0,8,11,4,9,5],[0,5,4,0,1,5,2,3,11],[2,1,5,2,5,8,2,8,11,4,8,5],[10,3,11,10,1,3,9,5,4],[4,9,5,0,8,1,8,10,1,8,11,10],[5,4,0,5,0,11,5,11,10,11,0,3],[5,4,8,5,8,10,10,8,11],[9,7,8,5,7,9],[9,3,0,9,5,3,5,7,3],[0,7,8,0,1,7,1,5,7],[1,5,3,3,5,7],[9,7,8,9,5,7,10,1,2],[10,1,2,9,5,0,5,3,0,5,7,3],[8,0,2,8,2,5,8,5,7,10,5,2],[2,10,5,2,5,3,3,5,7],[7,9,5,7,8,9,3,11,2],[9,5,7,9,7,2,9,2,0,2,7,11],[2,3,11,0,1,8,1,7,8,1,5,7],[11,2,1,11,1,7,7,1,5],[9,5,8,8,5,7,10,1,3,10,3,11],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0],[11,10,5,7,11,5],[10,6,5],[0,8,3,5,10,6],[9,0,1,5,10,6],[1,8,3,1,9,8,5,10,6],[1,6,5,2,6,1],[1,6,5,1,2,6,3,0,8],[9,6,5,9,0,6,0,2,6],[5,9,8,5,8,2,5,2,6,3,2,8],[2,3,11,10,6,5],[11,0,8,11,2,0,10,6,5],[0,1,9,2,3,11,5,10,6],[5,10,6,1,9,2,9,11,2,9,8,11],[6,3,11,6,5,3,5,1,3],[0,8,11,0,11,5,0,5,1,5,11,6],[3,11,6,0,3,6,0,6,5,0,5,9],[6,5,9,6,9,11,11,9,8],[5,10,6,4,7,8],[4,3,0,4,7,3,6,5,10],[1,9,0,5,10,6,8,4,7],[10,6,5,1,9,7,1,7,3,7,9,4],[6,1,2,6,5,1,4,7,8],[1,2,5,5,2,6,3,0,4,3,4,7],[8,4,7,9,0,5,0,6,5,0,2,6],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9],[3,11,2,7,8,4,10,6,5],[5,10,6,4,7,2,4,2,0,2,7,11],[0,1,9,4,7,8,2,3,11,5,10,6],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6],[8,4,7,3,11,5,3,5,1,5,11,6],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11],[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7],[6,5,9,6,9,11,4,7,9,7,11,9],[10,4,9,6,4,10],[4,10,6,4,9,10,0,8,3],[10,0,1,10,6,0,6,4,0],[8,3,1,8,1,6,8,6,4,6,1,10],[1,4,9,1,2,4,2,6,4],[3,0,8,1,2,9,2,4,9,2,6,4],[0,2,4,4,2,6],[8,3,2,8,2,4,4,2,6],[10,4,9,10,6,4,11,2,3],[0,8,2,2,8,11,4,9,10,4,10,6],[3,11,2,0,1,6,0,6,4,6,1,10],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1],[9,6,4,9,3,6,9,1,3,11,6,3],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1],[3,11,6,3,6,0,0,6,4],[6,4,8,11,6,8],[7,10,6,7,8,10,8,9,10],[0,7,3,0,10,7,0,9,10,6,7,10],[10,6,7,1,10,7,1,7,8,1,8,0],[10,6,7,10,7,1,1,7,3],[1,2,6,1,6,8,1,8,9,8,6,7],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9],[7,8,0,7,0,6,6,0,2],[7,3,2,6,7,2],[2,3,11,10,6,8,10,8,9,8,6,7],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11],[11,2,1,11,1,7,10,6,1,6,7,1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6],[0,9,1,11,6,7],[7,8,0,7,0,6,3,11,0,11,6,0],[7,11,6],[7,6,11],[3,0,8,11,7,6],[0,1,9,11,7,6],[8,1,9,8,3,1,11,7,6],[10,1,2,6,11,7],[1,2,10,3,0,8,6,11,7],[2,9,0,2,10,9,6,11,7],[6,11,7,2,10,3,10,8,3,10,9,8],[7,2,3,6,2,7],[7,0,8,7,6,0,6,2,0],[2,7,6,2,3,7,0,1,9],[1,6,2,1,8,6,1,9,8,8,7,6],[10,7,6,10,1,7,1,3,7],[10,7,6,1,7,10,1,8,7,1,0,8],[0,3,7,0,7,10,0,10,9,6,10,7],[7,6,10,7,10,8,8,10,9],[6,8,4,11,8,6],[3,6,11,3,0,6,0,4,6],[8,6,11,8,4,6,9,0,1],[9,4,6,9,6,3,9,3,1,11,3,6],[6,8,4,6,11,8,2,10,1],[1,2,10,3,0,11,0,6,11,0,4,6],[4,11,8,4,6,11,0,2,9,2,10,9],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3],[8,2,3,8,4,2,4,6,2],[0,4,2,4,6,2],[1,9,0,2,3,4,2,4,6,4,3,8],[1,9,4,1,4,2,2,4,6],[8,1,3,8,6,1,8,4,6,6,10,1],[10,1,0,10,0,6,6,0,4],[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3],[10,9,4,6,10,4],[4,9,5,7,6,11],[0,8,3,4,9,5,11,7,6],[5,0,1,5,4,0,7,6,11],[11,7,6,8,3,4,3,5,4,3,1,5],[9,5,4,10,1,2,7,6,11],[6,11,7,1,2,10,0,8,3,4,9,5],[7,6,11,5,4,10,4,2,10,4,0,2],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6],[7,2,3,7,6,2,5,4,9],[9,5,4,0,8,6,0,6,2,6,8,7],[3,6,2,3,7,6,1,5,0,5,4,0],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8],[9,5,4,10,1,6,1,7,6,1,3,7],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10],[7,6,10,7,10,8,5,4,10,4,8,10],[6,9,5,6,11,9,11,8,9],[3,6,11,0,6,3,0,5,6,0,9,5],[0,11,8,0,5,11,0,1,5,5,6,11],[6,11,3,6,3,5,5,3,1],[1,2,10,9,5,11,9,11,8,11,5,6],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5],[6,11,3,6,3,5,2,10,3,10,5,3],[5,8,9,5,2,8,5,6,2,3,8,2],[9,5,6,9,6,0,0,6,2],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8],[1,5,6,2,1,6],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6],[10,1,0,10,0,6,9,5,0,5,6,0],[0,3,8,5,6,10],[10,5,6],[11,5,10,7,5,11],[11,5,10,11,7,5,8,3,0],[5,11,7,5,10,11,1,9,0],[10,7,5,10,11,7,9,8,1,8,3,1],[11,1,2,11,7,1,7,5,1],[0,8,3,1,2,7,1,7,5,7,2,11],[9,7,5,9,2,7,9,0,2,2,11,7],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2],[2,5,10,2,3,5,3,7,5],[8,2,0,8,5,2,8,7,5,10,2,5],[9,0,1,5,10,3,5,3,7,3,10,2],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2],[1,3,5,3,7,5],[0,8,7,0,7,1,1,7,5],[9,0,3,9,3,5,5,3,7],[9,8,7,5,9,7],[5,8,4,5,10,8,10,11,8],[5,0,4,5,11,0,5,10,11,11,3,0],[0,1,9,8,4,10,8,10,11,10,4,5],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4],[2,5,1,2,8,5,2,11,8,4,5,8],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5],[9,4,5,2,11,3],[2,5,10,3,5,2,3,4,5,3,8,4],[5,10,2,5,2,4,4,2,0],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9],[5,10,2,5,2,4,1,9,2,9,4,2],[8,4,5,8,5,3,3,5,1],[0,4,5,1,0,5],[8,4,5,8,5,3,9,0,5,0,3,5],[9,4,5],[4,11,7,4,9,11,9,10,11],[0,8,3,4,9,7,9,11,7,9,10,11],[1,10,11,1,11,4,1,4,0,7,4,11],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4],[4,11,7,9,11,4,9,2,11,9,1,2],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3],[11,7,4,11,4,2,2,4,0],[11,7,4,11,4,2,8,3,4,3,2,4],[2,9,10,2,7,9,2,3,7,7,4,9],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10],[1,10,2,8,7,4],[4,9,1,4,1,7,7,1,3],[4,9,1,4,1,7,0,8,1,8,7,1],[4,0,3,7,4,3],[4,8,7],[9,10,8,10,11,8],[3,0,9,3,9,11,11,9,10],[0,1,10,0,10,8,8,10,11],[3,1,10,11,3,10],[1,2,11,1,11,9,9,11,8],[3,0,9,3,9,11,1,2,9,2,11,9],[0,2,11,8,0,11],[3,2,11],[2,3,8,2,8,10,10,8,9],[9,10,2,0,9,2],[2,3,8,2,8,10,0,1,8,1,10,8],[1,10,2],[1,3,8,9,1,8],[0,9,1],[0,3,8],[]],a=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]],i=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]];t.marchingCubes=function(n,e,t){t||(t=[[0,0,0],n]);for(var u=[0,0,0],c=[0,0,0],s=0;s<3;++s)u[s]=(t[1][s]-t[0][s])/n[s],c[s]=t[0][s];var f=[],l=[],v=0,p=new Array(8),m=new Array(12),d=[0,0,0];for(d[2]=0;d[2]<n[2]-1;++d[2],v+=n[0])for(d[1]=0;d[1]<n[1]-1;++d[1],++v)for(d[0]=0;d[0]<n[0]-1;++d[0],++v){for(var h=0,s=0;s<8;++s){var x=a[s],g=e(u[0]*(d[0]+x[0])+c[0],u[1]*(d[1]+x[1])+c[1],u[2]*(d[2]+x[2])+c[2]);p[s]=g,h|=g>0?1<<s:0}var M=r[h];if(0!==M){for(s=0;s<12;++s)if(0!=(M&1<<s)){m[s]=f.length;var w=[0,0,0],T=i[s],b=a[T[0]],A=a[T[1]],y=p[T[0]],E=y-p[T[1]],R=0;Math.abs(E)>1e-6&&(R=y/E);for(var P=0;P<3;++P)w[P]=u[P]*(d[P]+b[P]+R*(A[P]-b[P]))+c[P];f.push(w)}for(var I=o[h],s=0;s<I.length;s+=3)l.push([m[I[s]],m[I[s+1]],m[I[s+2]]])}}return{positions:f,cells:l}}},{}],63:[function(n,e,t){var r=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]],o=[[0,2,3,7],[0,6,2,7],[0,4,6,7],[0,6,1,2],[0,1,6,4],[5,6,1,4]];t.marchingTetrahedra=function(n,e,t){function a(n,e){var t=v[n],o=v[e],a=r[n],c=r[e],f=[p[0],p[1],p[2]],l=t-o;Math.abs(l)>1e-6&&(l=t/l);for(var m=0;m<3;++m)f[m]=i[m]*(f[m]+a[m]+l*(c[m]-a[m]))+u[m];return s.push(f),s.length-1}t||(t=[[0,0,0],n]);for(var i=[0,0,0],u=[0,0,0],c=0;c<3;++c)i[c]=(t[1][c]-t[0][c])/n[c],u[c]=t[0][c];var s=[],f=[],l=0,v=new Float32Array(8),p=(new Int32Array(12),[0,0,0]);for(p[2]=0;p[2]<n[2]-1;++p[2],l+=n[0])for(p[1]=0;p[1]<n[1]-1;++p[1],++l)for(p[0]=0;p[0]<n[0]-1;++p[0],++l){for(c=0;c<8;++c){var m=r[c];v[c]=e(i[0]*(p[0]+m[0])+u[0],i[1]*(p[1]+m[1])+u[1],i[2]*(p[2]+m[2])+u[2])}for(c=0;c<o.length;++c){var d=o[c],h=0;switch(v[d[0]]<0&&(h|=1),v[d[1]]<0&&(h|=2),v[d[2]]<0&&(h|=4),v[d[3]]<0&&(h|=8),h){case 0:case 15:break;case 14:f.push([a(d[0],d[1]),a(d[0],d[3]),a(d[0],d[2])]);break;case 1:f.push([a(d[0],d[1]),a(d[0],d[2]),a(d[0],d[3])]);break;case 13:f.push([a(d[1],d[0]),a(d[1],d[2]),a(d[1],d[3])]);break;case 2:f.push([a(d[1],d[0]),a(d[1],d[3]),a(d[1],d[2])]);break;case 12:f.push([a(d[1],d[2]),a(d[1],d[3]),a(d[0],d[3]),a(d[0],d[2])]);break;case 3:f.push([a(d[1],d[2]),a(d[0],d[2]),a(d[0],d[3]),a(d[1],d[3])]);break;case 4:f.push([a(d[2],d[0]),a(d[2],d[1]),a(d[2],d[3])]);break;case 11:f.push([a(d[2],d[0]),a(d[2],d[3]),a(d[2],d[1])]);break;case 5:f.push([a(d[0],d[1]),a(d[1],d[2]),a(d[2],d[3]),a(d[0],d[3])]);break;case 10:f.push([a(d[0],d[1]),a(d[0],d[3]),a(d[2],d[3]),a(d[1],d[2])]);break;case 6:f.push([a(d[2],d[3]),a(d[0],d[2]),a(d[0],d[1]),a(d[1],d[3])]);break;case 9:f.push([a(d[2],d[3]),a(d[1],d[3]),a(d[0],d[1]),a(d[0],d[2])]);break;case 7:f.push([a(d[3],d[0]),a(d[3],d[1]),a(d[3],d[2])]);break;case 8:f.push([a(d[3],d[0]),a(d[3],d[2]),a(d[3],d[1])])}}}return{positions:s,cells:f}}},{}],64:[function(n,e,t){"use strict";var r=new Int32Array(24),o=new Int32Array(256);!function(){for(var n=0,e=0;e<8;++e)for(i=1;i<=4;i<<=1){var t=e^i;e<=t&&(r[n++]=e,r[n++]=t)}for(e=0;e<256;++e){for(var a=0,i=0;i<24;i+=2)a|=!!(e&1<<r[i])!==!!(e&1<<r[i+1])?1<<(i>>1):0;o[e]=a}}();var a=new Array(4096);!function(){for(var n=0;n<a.length;++n)a[n]=0}(),t.surfaceNets=function(n,e,t){t||(t=[[0,0,0],n]);for(var i=[0,0,0],u=[0,0,0],c=0;c<3;++c)i[c]=(t[1][c]-t[0][c])/n[c],u[c]=t[0][c];var s=[],f=[],l=[0,0,0],v=[1,n[0]+1,(n[0]+1)*(n[1]+1)],p=[0,0,0,0,0,0,0,0],m=1;if(2*v[2]>a.length){var d=a.length;for(a.length=2*v[2];d<a.length;)a[d++]=0}for(l[2]=0;l[2]<n[2]-1;++l[2],n[0],m^=1,v[2]=-v[2]){var h=1+(n[0]+1)*(1+m*(n[1]+1));for(l[1]=0;l[1]<n[1]-1;++l[1],0,h+=2)for(l[0]=0;l[0]<n[0]-1;++l[0],0,++h){for(var x=0,g=0,M=0;M<2;++M)for(I=0;I<2;++I)for(c=0;c<2;++c,++g){var w=e(i[0]*(l[0]+c)+u[0],i[1]*(l[1]+I)+u[1],i[2]*(l[2]+M)+u[2]);p[g]=w,x|=w<0?1<<g:0}if(0!==x&&255!==x){for(var T=o[x],b=[0,0,0],A=0,c=0;c<12;++c)if(T&1<<c){++A;var y=r[c<<1],E=r[1+(c<<1)],R=p[y],P=R-p[E];if(Math.abs(P)>1e-6){P=R/P;for(var I=0,M=1;I<3;++I,M<<=1){var C=y&M,L=E&M;b[I]+=C!==L?C?1-P:P:C?1:0}}}for(var _=1/A,c=0;c<3;++c)b[c]=i[c]*(l[c]+_*b[c])+u[c];a[h]=s.length,s.push(b);for(c=0;c<3;++c)if(T&1<<c){var F=(c+1)%3,B=(c+2)%3;if(0!==l[F]&&0!==l[B]){var D=v[F],N=v[B];1&x?(f.push([a[h],a[h-D],a[h-N]]),f.push([a[h-N],a[h-D],a[h-D-N]])):(f.push([a[h],a[h-N],a[h-D]]),f.push([a[h-D],a[h-N],a[h-D-N]]))}}}}}return{positions:s,cells:f}}},{}],65:[function(n,e,t){(function(n){e.exports=n.performance&&n.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
